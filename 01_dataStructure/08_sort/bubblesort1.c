// ??????????????????C???????????www.freecplus.net??????§Ö???
#include <stdlib.h>
#include <stdio.h>

// ????????????????????
// ????arr??????????????????len???????????????
void bubblesort1(int *arr,unsigned int len)
{
  if (len<2) return; // ????§³??2?????????????

  int ii;     // ??????????????????
  int jj;     // ???????????¦Ë?¨¹???????
  int itmp;   // ???????????§³?????¦Ë????????????????
  int ifswap; // ??????????????????????0-¦Ä??????1-?§ß?????

  // 44,3,38,5,47,15,36,26,27,2,46,4,19,50,48  
  for (ii=len-1;ii>0;ii--)  // ???????len-1?????
  {
printf("ii=%d\n",ii);
    ifswap=0; // ??????????????
    for (jj=0;jj<ii;jj++)  // ??????????0......ii????????ii???????????????????
    {
      if (arr[jj]>arr[jj+1])  // ??????????????????????????¦Ë??¦Ë?¨¢?
      {
        itmp=arr[jj+1];
        arr[jj+1]=arr[jj];
        arr[jj]=itmp;
        ifswap=1; // ????????????
      }
    }

    if (ifswap==0) return;
  }
}

// ???????????????
// ????arr??????????????????len???????????????
void bubblesort2(int *arr,unsigned int len)
{
  if (len<2) return; // ????§³??2?????????????

printf("len=%d\n",len);

  int ii;       // ????????¦Ë?¨¹???????
  int itmp;     // ???????????§³?????¦Ë????????????????
  int ifswap=0; // ???????????????????0-¦Ä??????1-?§ß?????

  for (ii=0;ii<len-1;ii++)  // ??????????0......len-1????????len-1???????????????????
  {
    if (arr[ii]>arr[ii+1])  // ??????????????????????????¦Ë??¦Ë?¨¢?
    {
      itmp=arr[ii+1];
      arr[ii+1]=arr[ii];
      arr[ii]=itmp;
      ifswap=1; // ????????????
    }
  }

  if (ifswap==0) return;

  bubblesort2(arr,--len);
}

int main(int argc,char *argv[])
{
  int arr[]={44,3,38,5,47,15,36,26,27,2,46,4,19,50,48};
  int len=sizeof(arr)/sizeof(int);

  bubblesort2(arr,len);

  // ???????????
  int ii;
  for (ii=0;ii<len;ii++) printf("%2d ",arr[ii]);

  printf("\n");

  // system("pause");  // widnows???C??????§Õ???

  return 0;
}
